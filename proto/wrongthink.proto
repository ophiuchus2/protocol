syntax = "proto3";

service wrongthink {
  rpc GetWrongthinkChannels(WrongthinkChannel) returns (stream WrongthinkChannel) {}
  rpc CreateWrongthinkChannel(WrongthinkChannel) returns (WrongthinkChannel) {}
  rpc SendWrongthinkMessage(stream WrongthinkMessage) returns (WrongthinkMeta) {}
  rpc ListenWrongthinkMessages(ListenWrongthinkMessagesRequest) returns (stream WrongthinkMessage) {}
}

message WrongthinkChannel {
  int32 channelid = 1;
  bool public = 2;
  string name = 3;
}

message WrongthinkMessage {
  string uname = 1;
  string channelname = 2;
  string text = 3;
}

message WrongthinkMeta {
  int32 channelid = 1;
  string channelname = 2;
  string text = 3;
}

message ListenWrongthinkMessagesRequest{
  string uname = 1;
  string channelname = 2;
}
